<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–ì–æ–Ω–∫–∞ –∑–∞ 50 –ø—É–Ω–∫—Ç–æ–≤</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body {
margin: 0;
padding: 20px;
font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
background: linear-gradient(135deg, #fde2e4, #e0f2fe);
}


h1 {
text-align: center;
margin-bottom: 10px;
}


.controls {
text-align: center;
margin-bottom: 20px;
}

.players {
max-width: 500px;
margin: 0 auto;
display: flex;
flex-direction: column;
gap: 16px;
}


.card {
background: #ffffff;
border-radius: 16px;
padding: 12px;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}


.top {
display: flex;
align-items: center;
gap: 12px;
}


.avatar img {
width: 48px;
height: 48px;
border-radius: 50%;
object-fit: cover;
}


.bar {
background: #e5e7eb;
height: 14px;
border-radius: 8px;
overflow: hidden;
margin: 8px 0 10px 0;
}


.fill {
height: 100%;
background: #4ade80;
width: 0%;
transition: width 0.5s ease;
}


.buttons {
display: flex;
gap: 8px;
}

button {
flex: 1;
border: none;
border-radius: 10px;
padding: 6px;
font-size: 18px;
cursor: pointer;
}


.plus { background: #22c55e; color: white; }
.minus { background: #f87171; color: white; }


.footer {
text-align: center;
font-size: 12px;
color: #555;
margin-top: 20px;
}
</style>
</head>
<body>


<h1>üèÅ –ì–æ–Ω–∫–∞ –∑–∞ 50 –ø—É–Ω–∫—Ç–æ–≤</h1>


<div class="controls">
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤:
<input id="delta" type="number" value="1" style="width:60px;" />
</div>


<div class="players" id="players"></div>


<div class="footer">–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</div>


<script>
const GOAL = 50;
const STORAGE_KEY = "points_race_players";


const defaultPlayers = [
{ id: 1, name: "Luca", points: 0, avatar: "luca.png" },
{ id: 2, name: "Ezra", points: 0, avatar: "ezra.png" },
{ id: 3, name: "Raphael", points: 0, avatar: "raphael.png" }
];


let players = loadPlayers();


function loadPlayers() {
try {
const saved = localStorage.getItem(STORAGE_KEY);
return saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(defaultPlayers));
} catch (e) {
return JSON.parse(JSON.stringify(defaultPlayers));
}
}

function savePlayers() {
localStorage.setItem(STORAGE_KEY, JSON.stringify(players));
}


function getDelta() {
const val = parseInt(document.getElementById("delta").value);
return isNaN(val) ? 1 : val;
}


function changePoints(id, delta) {
const player = players.find(p => p.id === id);
if (!player) return;
player.points += delta;
savePlayers();
render();
checkWinner();
}


function checkWinner() {
const winner = players.find(p => p.points >= GOAL);
if (winner) {
setTimeout(() => {
alert("üéâ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: " + winner.name + "!");
resetGame();
}, 100);
}
}


function resetGame() {
players = JSON.parse(JSON.stringify(defaultPlayers));
localStorage.removeItem(STORAGE_KEY);
render();
}


function render() {
const container = document.getElementById("players");
container.innerHTML = "";


players.forEach(p => {
const card = document.createElement("div");
card.className = "card";


const progress = Math.min(p.points / GOAL, 1) * 100;


card.innerHTML = `
<div class="top">
<div class="avatar"><img src="${p.avatar}" alt="${p.name}"></div>
<div>
<div><strong>${p.name}</strong></div>
<div>${p.points} –ø—É–Ω–∫—Ç–æ–≤</div>
</div>
</div>
<div class="bar"><div class="fill" style="width:${progress}%"></div></div>
<div class="buttons">
<button class="plus">+</button>
<button class="minus">‚àí</button>
</div>
`;


card.querySelector(".plus").onclick = () => changePoints(p.id, getDelta());
card.querySelector(".minus").onclick = () => changePoints(p.id, -getDelta());


container.appendChild(card);
});
}


render();
</script>


</body>
</html>
