import React, { useEffect, useState } from "react";


const GOAL = 50;


const defaultPlayers = [
{ id: 1, name: "–£—á–∞—Å—Ç–Ω–∏–∫ 1", points: 0, avatar: "üòÄ" },
{ id: 2, name: "–£—á–∞—Å—Ç–Ω–∏–∫ 2", points: 0, avatar: "üòé" },
{ id: 3, name: "–£—á–∞—Å—Ç–Ω–∏–∫ 3", points: 0, avatar: "ü§©" },
];


function loadPlayers() {
try {
const saved = localStorage.getItem("points-race-players");
return saved ? JSON.parse(saved) : defaultPlayers;
} catch {
return defaultPlayers;
}
}


export default function App() {
const [players, setPlayers] = useState(loadPlayers);
const [delta, setDelta] = useState(1);


useEffect(() => {
localStorage.setItem("points-race-players", JSON.stringify(players));
}, [players]);


function updatePoints(id, change) {
setPlayers((prev) =>
prev.map((p) =>
p.id === id ? { ...p, points: p.points + change } : p
)
);
}


useEffect(() => {
const winner = players.find((p) => p.points >= GOAL);
if (winner) {
setTimeout(() => {
alert(`üéâ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${winner.name}!`);
setPlayers(defaultPlayers);
localStorage.removeItem("points-race-players");
}, 300);
}
}, [players]);


return (
<div className="min-h-screen bg-gradient-to-br from-pink-100 to-sky-100 p-6">
<h1 className="text-3xl font-bold text-center mb-6">üèÅ –ì–æ–Ω–∫–∞ –∑–∞ 50 –ø—É–Ω–∫—Ç–æ–≤</h1>


<div className="flex justify-center gap-4 mb-6">
<span className="self-center">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—á–∫–æ–≤:</span>
<input
type="number"
value={delta}
onChange={(e) => setDelta(Number(e.target.value))}
className="w-20 p-1 rounded border"
/>
</div>


<div className="grid gap-6 max-w-xl mx-auto">
{players.map((p) => (
<PlayerCard
key={p.id}
player={p}
onAdd={() => updatePoints(p.id, delta)}
onSub={() => updatePoints(p.id, -delta)}
/>
))}
</div>


<p className="text-center text-sm text-gray-500 mt-8">
–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
</p>
</div>
);
}


function PlayerCard({ player, onAdd, onSub }) {
const progress = Math.min(player.points / GOAL, 1);


return (
<div className="bg-white rounded-2xl shadow p-4">
<div className="flex items-center gap-4 mb-2">
<div className="text-4xl">{player.avatar}</div>
