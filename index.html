<!DOCTYPE html>


.card {
background: #ffffff;
border-radius: 16px;
padding: 12px;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}


.top {
display: flex;
align-items: center;
gap: 12px;
}


.avatar img {
width: 48px;
height: 48px;
border-radius: 50%;
object-fit: cover;
}


.bar {
background: #e5e7eb;
height: 14px;
border-radius: 8px;
overflow: hidden;
margin: 8px 0 10px 0;
}


.fill {
height: 100%;
background: #4ade80;
width: 0%;
transition: width 0.5s ease;
}


.buttons {
display: flex;
gap: 8px;
}


button {
flex: 1;
border: none;
border-radius: 10px;
padding: 6px;
font-size: 18px;
cursor: pointer;
}


.plus { background: #22c55e; color: white; }
.minus { background: #f87171; color: white; }


.footer {
text-align: center;
font-size: 12px;
color: #555;
margin-top: 20px;
}


/* ===== CONFETTI ===== */
.confetti {
position: fixed;
top: -10px;
width: 8px;
height: 12px;
opacity: 0.8;
pointer-events: none;
animation: fall linear forwards;
z-index: 9999;
}

function loadPlayers() {
try {
const saved = localStorage.getItem(STORAGE_KEY);
return saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(defaultPlayers));
} catch (e) {
return JSON.parse(JSON.stringify(defaultPlayers));
}
}


function savePlayers() {
localStorage.setItem(STORAGE_KEY, JSON.stringify(players));
}


function getDelta() {
const val = parseInt(document.getElementById("delta").value);
return isNaN(val) ? 1 : val;
}


function changePoints(id, delta) {
const player = players.find(p => p.id === id);
if (!player) return;
player.points += delta;
savePlayers();
render();
checkWinner();
}


function checkWinner() {
const winner = players.find(p => p.points >= GOAL);
if (winner) {
launchConfetti();
setTimeout(() => {
alert("ðŸŽ‰ ÐŸÐ¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŒ: " + winner.name + "!");
resetGame();
}, 800);
}
}


function resetGame() {
players = JSON.parse(JSON.stringify(defaultPlayers));
localStorage.removeItem(STORAGE_KEY);
render();
}


function render() {
const container = document.getElementById("players");
container.innerHTML = "";


players.forEach(p => {
const card = document.createElement("div");
card.className = "card";

const progress = Math.min(p.points / GOAL, 1) * 100;


card.innerHTML = `
<div class="top">
<div class="avatar"><img src="${p.avatar}" alt="${p.name}"></div>
<div>
<div><strong>${p.name}</strong></div>
<div>${p.points} Ð¿ÑƒÐ½ÐºÑ‚Ð¾Ð²</div>
</div>
</div>
<div class="bar"><div class="fill" style="width:${progress}%"></div></div>
<div class="buttons">
<button class="plus">+</button>
<button class="minus">âˆ’</button>
</div>
`;


card.querySelector(".plus").onclick = () => changePoints(p.id, getDelta());
card.querySelector(".minus").onclick = () => changePoints(p.id, -getDelta());


container.appendChild(card);
});
}


function launchConfetti() {
const colors = ["#ff6b6b", "#ffd93d", "#6bcB77", "#4dabf7", "#c77dff"];


for (let i = 0; i < 120; i++) {
const confetti = document.createElement("div");
confetti.className = "confetti";
confetti.style.left = Math.random() * 100 + "vw";
confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
confetti.style.animationDuration = 2 + Math.random() * 2 + "s";


document.body.appendChild(confetti);


setTimeout(() => confetti.remove(), 4000);
}
}


render();
</script>


</body>
</html>
